<!DOCTYPE html>
<!-- Vista "Registro": formulario de creación de cuenta para nuevos huéspedes.
     La validación de campos, coincidencia de contraseñas y el envío a la API
     son gestionados íntegramente por Register.js. -->
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Miyabi Ryokan - Register</title>

	<!-- Estilos base del sitio: tipografía, variables CSS y reset global -->
	<link rel="stylesheet" th:href="@{/css/base/global.css}">
	<!-- Navbar específica del flujo de reservas, compartida con booking, checkout y my-reservations -->
	<link rel="stylesheet" th:href="@{/css/reservation/booking-navbar.css}">
	<!-- Estilos de layout del checkout reutilizados aquí: grid de formulario,
	     cajas separadas (.box-separated) y cabeceras de sección -->
	<link rel="stylesheet" th:href="@{/css/reservation/Checkout.css}">
	<!-- Estilos propios del registro: columnas de formulario, input-box,
	     checkboxes personalizados y botones de autenticación -->
	<link rel="stylesheet" th:href="@{/css/auth/Register.css}">
</head>

<body>

	<!-- Navbar del flujo de reservas: componente Thymeleaf compartido entre booking,
	     checkout y my-reservations. En el registro el usuario no está autenticado,
	     por lo que booking-logic.js mostrará el botón de login en lugar del badge de perfil. -->
	<div th:replace="~{reservation/booking-navbar :: bookingNavbar}"></div>

	<!-- Contenedor principal del formulario de registro.
	     Combina el sistema de layout de .miyabi-booking-container con .register-container
	     para reutilizar la maquetación establecida en Register.css. -->
	<div class="miyabi-booking-container register-container">
		<h1 class="checkout-main-title register-page-title">Tu perfil</h1>

		<!-- Sección 1: Datos personales del nuevo huésped.
		     Recoge nombre, apellido, teléfono (opcional) y correo electrónico con confirmación.
		     El email se duplica para reducir errores tipográficos en un dato crítico de la cuenta. -->
		<div class="checkout-form-container box-separated">
			<div class="checkout-section-header">
				<h2 class="checkout-section-title register-section-title">Información del Perfil</h2>
				<p class="checkout-required-text">* Obligatorio</p>
			</div>

			<!-- Grid de dos columnas: nombre/apellido en la primera fila,
			     teléfono a ancho completo y email/confirmación en la tercera fila -->
			<div class="form-grid">
				<div class="form-col half-col">
					<div class="input-box">
						<label>Nombre<span class="req-star">*</span></label>
						<input type="text" id="reg-firstname" class="form-input" required>
					</div>
				</div>
				<div class="form-col half-col">
					<div class="input-box">
						<label>Apellido <span class="req-star">*</span></label>
						<input type="text" id="reg-lastname" class="form-input" required>
					</div>
				</div>

				<div class="form-col full-col">
					<div class="input-box">
						<label>Teléfono</label>
						<input type="text" id="reg-phone" class="form-input">
					</div>
				</div>

				<div class="form-col half-col">
					<div class="input-box">
						<label>correo electrónico  <span class="req-star">*</span></label>
						<input type="email" id="reg-email" class="form-input" required>
					</div>
				</div>
				<div class="form-col half-col">
					<div class="input-box">
						<label>Confirmar Correo Electrónico <span class="req-star">*</span></label>
						<input type="email" id="reg-confirm-email" class="form-input" required>
					</div>
				</div>
			</div>
		</div>

		<!-- Sección 2: Creación de contraseña.
		     A diferencia de Profile.html, ambos campos son obligatorios (required)
		     ya que el nuevo huésped aún no tiene credenciales en el sistema.
		     El helper detalla las reglas de seguridad aceptadas por la API. -->
		<div class="checkout-form-container box-separated">
			<h2 class="checkout-section-title section-title-spaced register-section-title">Contraseña</h2>

			<div class="form-grid">
				<div class="form-col half-col">
					<div class="input-box">
						<label>Crear contraseña <span class="req-star">*</span></label>
						<input type="password" id="reg-password" class="form-input" required>
					</div>
					<!-- Texto de ayuda con los requisitos de seguridad de la contraseña -->
					<span class="form-helper">Al menos 8 caracteres, distingue entre mayúsculas y minúsculas, puede contener !S#%, sin espacios, no puede ser igual a la contraseña o nombre de usuario anteriores.</span>
				</div>
				<div class="form-col half-col">
					<div class="input-box fit-height">
						<label>Confirmar contraseña <span class="req-star">*</span></label>
						<input type="password" id="reg-confirm-password" class="form-input" required>
					</div>
				</div>
			</div>
		</div>

		<!-- Sección 3: Consentimientos obligatorios.
		     A diferencia de Profile.html (un solo checkbox), el registro requiere dos:
		     aceptación de privacidad Y confirmación explícita de querer crear la cuenta.
		     Register.js bloquea el envío hasta que ambos estén marcados. -->
		<div class="checkout-form-container box-separated box-light-gray">
			<h2 class="checkout-section-title section-title-spaced register-section-title">Agradecimiento</h2>

			<div class="acknowledgement-group">
				<label class="checkbox-label">
					<input type="checkbox" id="chk-privacy" class="custom-checkbox" required>
					<span class="checkbox-text"><strong>*  Acepto los Términos de Privacidad.</strong></span>
				</label>
				<label class="checkbox-label">
					<input type="checkbox" id="chk-create-acc" class="custom-checkbox" required>
					<span class="checkbox-text"><strong>* Me gustaría crear una cuenta.</strong></span>
				</label>
			</div>
		</div>

		<!-- Acciones del formulario: CANCELAR navega hacia atrás en el historial del navegador;
		     CREAR invoca processRegistration() en Register.js para validar y enviar el alta a la API. -->
		<div class="auth-buttons-container">
			<button class="btn-auth-dark" onclick="window.history.back()">CANCELAR</button>
			<button class="btn-auth-dark" id="btn-create-account" onclick="processRegistration()">CREAR</button>
		</div>

	</div>

	<!-- Footer global: componente Thymeleaf compartido entre todas las páginas del sitio -->
	<div th:replace="~{fragments/layout/components :: footer}"></div>

	<!-- GSAP y ScrollTrigger: librería de animaciones disponible para Register.js
	     si se requieren transiciones de entrada o feedback visual en el formulario -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
	<!-- Scripts cargados en orden de dependencia:
	     global.js        → utilidades base del sitio
	     globalBooking.js → utilidades compartidas del flujo de reservas (showToast, etc.)
	     booking-logic.js → gestión del estado de sesión y autenticación en la navbar
	     Register.js      → validación del formulario, verificación de coincidencias
	                        y envío del alta del nuevo huésped a la API -->
	<script th:src="@{/js/base/global.js}"></script>
	<script th:src="@{/js/reservation/globalBooking.js}"></script>
	<script th:src="@{/js/reservation/booking-logic.js}"></script>
	<script th:src="@{/js/auth/Register.js}"></script>
</body>

</html>