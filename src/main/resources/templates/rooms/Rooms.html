<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Miyabi</title>

	<!-- Hoja de estilos globales: reset, variables CSS y utilidades compartidas en todo el proyecto -->
	<link rel="stylesheet" th:href="@{/css/base/global.css}">

	<!-- Estilos del componente de indicador de scroll (barra de progreso o navegación entre secciones) -->
	<link rel="stylesheet" th:href="@{/css/components/scroll-indicator.css}">

	<!-- Estilos específicos de la página de Habitaciones -->
	<link rel="stylesheet" th:href="@{/css/pages/Rooms.css}" />

	<!-- Estilos reutilizables de secciones (intro, separadores, layouts comunes) -->
	<link rel="stylesheet" th:href="@{/css/components/sections.css}">

	<!-- Librería externa Swiper.js: utilizada para carruseles/sliders de imágenes -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>

<body>

	<!-- Navbar: fragmento reutilizable de Thymeleaf que inyecta la barra de navegación principal -->
	<div th:replace="~{fragments/layout/components :: navbar}"></div>

	<!-- Contenido principal de la página de Habitaciones -->
	<main class="rooms-page miyabi-container">

		<!-- Sección introductoria de la página: muestra imagen SVG decorativa, título y descripción general de las habitaciones.
			 Utiliza el fragmento reutilizable 'fac-intro' definido en fragments/sections -->
		<div th:replace="~{fragments/sections :: fac-intro(
						'https://mukayu.com/wp-content/themes/corporate/img/rooms_jp.svg', 
						'Habitaciones', 
						'Miyabi cuenta con 6 amplias habitaciones que ofrecen una atmósfera de serenidad y paz. 
							Todas las habitaciones están orientadas hacia el Jardín del Bosque, donde los árboles 
							disfrutan de la libertad de extender sus ramas. Los ventanales de cada habitación de invitados 
							se abren ampliamente hacia el jardín para invitar a la naturaleza a fluir hacia el interior. 
							Se anima a los huéspedes a sintonizar con los ritmos de la naturaleza. Cada habitación dispone 
							de un baño privado de aguas termales al aire libre con vistas al jardín, permitiendo a los 
							huéspedes sumergirse en las aguas termales en el momento que deseen y durante todo el tiempo 
							que quieran.'	
						)}"></div>

		<!-- Indicador de scroll: componente que muestra el nombre de la sección activa mientras el usuario navega -->
		<div th:replace="~{fragments/scroll-indicator :: scroll-indicator('Habitaciones')}"></div>

		<!-- Sección principal: listado dinámico de tipos de habitación generado con Thymeleaf -->
		<section class="miyabi-rooms-section">

			<!-- Iteración sobre la colección 'roomTypes' inyectada por el controlador.
				 Cada 'room' genera un bloque de layout con su información e imágenes correspondientes.
				 El atributo 'data-name' permite identificar la sección activa desde el script de scroll. -->
			<div class="room-dynamic-layout scroll-tracked-section" th:data-name="${room.nameType}"
				th:each="room : ${roomTypes}">

				<!-- Columna izquierda: información textual y especificaciones de la habitación -->
				<div class="room-info-side">
					<div class="info-content-wrapper">

						<!-- Nombre del tipo de habitación -->
						<h1 class="room-nametype" th:text="${room.nameType}">Nombre de Habitación</h1>

						<!-- Bloque de contenido con animación de reveal al hacer scroll -->
						<div class="info-text-reveal">

							<div class="separator-line"></div>

							<!-- Descripción larga de la habitación -->
							<p class="room-description" th:text="${room.description}">Descripción detallada...</p>

							<!-- Plano de planta de la habitación: solo se renderiza si la URL está disponible -->
							<div class="room-floorplan" th:if="${room.floorPlanUrl != null}">
								<img th:src="@{${room.floorPlanUrl}}" alt="Plano de la habitación">
							</div>

							<!-- Descripción corta: resumen visible en vistas compactas o como subtítulo -->
							<p class="room-short-description" th:text="${room.shortDescription}">Descripción corta...</p>

							<!-- Lista de especificaciones: ubicación, tamaño, amenidades y capacidad.
								 Cada ítem se renderiza condicionalmente según los datos disponibles en el modelo. -->
							<ul class="room-specs-list">
								<!-- Ubicación: se muestra solo si el campo existe -->
								<li th:if="${room.locationInfo != null}">
									<span class="icon-bullet">◎</span>
									<span th:text="${room.locationInfo}">Ubicación</span>
								</li>

								<!-- Tamaño de la habitación en m²: se muestra solo si el campo existe -->
								<li th:if="${room.roomSize != null}">
									<span class="icon-bullet">◎</span>
									<span>Tamaño: <span th:text="${room.roomSize}">60 m²</span></span>
								</li>

								<!-- Iteración sobre la lista de amenidades parseadas desde el modelo -->
								<li th:each="amenity : ${room.parsedAmenities}">
									<span class="icon-bullet">◎</span>
									<span th:text="${amenity}">Amenidad</span>
								</li>

								<!-- Capacidad máxima de huéspedes por habitación -->
								<li>
									<span class="icon-bullet">◎</span>
									<span>Capacidad máxima <span th:text="${room.capacityPeople}">2</span>
										huéspedes</span>
								</li>
							</ul>

							<!-- CTA de reserva: redirige al flujo de booking -->
							<a href="/reservation/booking" class="btn-room-booking">Room Booking</a>
						</div>

					</div>
				</div>

				<!-- Columna derecha: carrusel de imágenes de la habitación -->
				<div class="room-images-side">
					<div class="room-custom-carousel">

						<!-- Iteración sobre las imágenes asociadas a la habitación.
							 La primera imagen recibe la clase 'active' para ser visible por defecto. -->
						<div th:each="img, iterStat : ${room.images}"
							th:class="'room-slide ' + (${iterStat.index == 0 ? 'active' : ''})">

							<!-- Imagen del slide con lazy loading para optimizar el rendimiento de carga -->
							<img th:src="@{${img.imageUrl}}"
								th:alt="${img.altText != null ? img.altText : room.nameType}" loading="lazy">

						</div>

					</div>
				</div>

			</div>

		</section>

	</main>

	<!-- Footer: fragmento reutilizable de Thymeleaf que inyecta el pie de página global -->
	<div th:replace="~{fragments/layout/components :: footer}"></div>

	<!-- GSAP: librería de animaciones JavaScript de alto rendimiento -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

	<!-- ScrollTrigger: plugin de GSAP para disparar animaciones basadas en la posición de scroll -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

	<!-- Script global: inicializa comportamientos compartidos en todas las páginas (navbar, utilidades, etc.) -->
	<script th:src="@{/js/base/global.js}"></script>

	<!-- Script del indicador de scroll: controla la actualización del nombre de sección activa -->
	<script th:src="@{/js/components/scroll-indicator.js}"></script>

	<!-- Script de secciones: maneja las animaciones y comportamientos de los fragmentos de sección reutilizables -->
	<script th:src="@{/js/components/sections.js}"></script>

	<!-- Script específico de la página Rooms: lógica del carrusel de imágenes y animaciones de reveal -->
	<script th:src="@{/js/pages/Rooms.js}"></script>

</body>

</html>