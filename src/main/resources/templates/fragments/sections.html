<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- ============================================================
     ARCHIVO DE FRAGMENTOS REUTILIZABLES — Página de instalaciones
     Contiene tres fragmentos parametrizados que componen la
     estructura completa de cualquier página tipo "facilities":

       1. fac-intro         → Sección introductoria con kanji + título + párrafo
       2. fac-section       → Bloque de instalación con texto, carrusel y CTA opcional

     Al ser fragmentos parametrizados, toda la variación de contenido
     (textos, imágenes, rutas) se pasa desde la vista consumidora,
     manteniendo este archivo libre de contenido hardcodeado y
     reutilizable para cualquier página del mismo tipo.
     ============================================================ -->

<body>


    <!-- ============================================================
         FRAGMENTO 1: SECCIÓN INTRODUCTORIA
         Identificador: th:fragment="fac-intro (dataName, kanjiImg, title, paragraph)"
         Parámetros:
           - dataName  {String} — Nombre de sección para el indicador lateral
                                  (se asigna a data-name vía th:attr).
           - kanjiImg  {String} — Ruta al SVG del título en japonés (tategaki).
           - title     {String} — Título principal de la página (H1).
           - paragraph {String} — Párrafo de contexto. th:utext permite HTML
                                  enriquecido (saltos de línea, <br>, etc.).

         Uso:
           <div th:replace="~{fragments/sections :: fac-intro(
               dataName='Entrada',
               kanjiImg=@{/img/facilities_jp.svg},
               title='Instalaciones',
               paragraph='Texto de introducción...')}">
           </div>
         ============================================================ -->
    <section th:fragment="fac-intro (kanjiImg, title, paragraph)" class="fac-intro">

        <!-- Columna izquierda: identidad tipográfica de la sección.
             El SVG tategaki y el H1 establecen la marca visual
             antes de que el usuario lea el contenido descriptivo. -->
        <div class="fac-intro-left">
            <!-- Título en japonés como SVG para preservar la tipografía
                 personalizada sin depender de fuentes web externas. -->
            <img th:src="${kanjiImg}" alt="Kanji" class="fac-jp-img">
            <h1 class="fac-title" th:text="${title}">Título</h1>
        </div>

        <!-- Columna derecha: texto de contexto histórico o descriptivo.
             th:utext (en lugar de th:text) permite renderizar etiquetas
             HTML en el contenido del párrafo si el servidor las incluye. -->
        <div class="fac-intro-right">
            <p th:utext="${paragraph}">Párrafo...</p>
        </div>
    </section>


    <!-- ============================================================
         FRAGMENTO 2: BLOQUE DE INSTALACIÓN REPETIBLE
         Identificador: th:fragment="fac-section (dataName, title, paragraph, images, ctaText, ctaLink)"
         Parámetros:
           - dataName  {String}      — Nombre de sección para el indicador lateral.
           - title     {String}      — Título H2 de la instalación.
           - paragraph {String}      — Descripción. Admite HTML con th:utext.
           - images    {List<String>}— Lista de URLs para el carrusel. La primera
                                       recibe automáticamente la clase "active".
           - ctaText   {String|null} — Texto del botón de acción. Si es null,
                                       el enlace no se renderiza (th:if).
           - ctaLink   {String|null} — URL destino del CTA.

         Uso (con CTA):
           <div th:replace="~{fragments/sections :: fac-section(
               dataName='Bibliotecas',
               title='Bibliotecas',
               paragraph='Descripción...',
               images=${#lists.of('/img/lib_01.jpg', '/img/lib_02.jpg')},
               ctaText='Tres Bibliotecas',
               ctaLink=@{/bibliotecas})}">
           </div>

         Uso (sin CTA): pasar ctaText=null omite el botón completamente.
         ============================================================ -->
    <section th:fragment="fac-section (dataName, title, paragraph, images, ctaText, ctaLink)" class="fac-section" th:attr="data-name=${dataName}">

        <!-- Columna de texto: título, divisor decorativo, descripción y CTA opcional -->
        <div class="fac-text-col">
            <h2 class="fac-section-title" th:text="${title}">Título</h2>
            <!-- Divisor decorativo entre título y párrafo, animado por el JS
                 de la sección con un stagger respecto al título. -->
            <div class="fac-divider"></div>
            <p th:utext="${paragraph}">Descripción...</p>

            <!-- CTA de navegación: solo se renderiza si ctaText no es null,
                 evitando markup vacío en secciones sin página de detalle.
                 La flecha es SVG inline para control total sobre su trazo. -->
            <a th:if="${ctaText != null}" th:href="${ctaLink}" class="miyabi-link-btn">
                <span class="link-btn-text" th:text="${ctaText}">Botón</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="link-btn-icon">
                    <polyline points="8 5 16 12 8 19" stroke="black" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </a>
        </div>

        <!-- Carrusel de imágenes: generado dinámicamente desde la lista "images".
             th:each itera la colección; th:classappend añade "active" únicamente
             al primer elemento (iterStat.first) para que el JS de facilities.js
             pueda tomar el control del carrusel desde un estado inicial válido. -->
        <div class="fac-carousel">
            <img th:each="img, iterStat : ${images}"
                 th:src="${img}"
                 th:classappend="${iterStat.first} ? 'active' : ''"
                 class="slide"
                 alt="Instalación">
        </div>
    </section>

</body>
</html>